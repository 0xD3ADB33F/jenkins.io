<html>
<head>
<title>
JUC Speaker Blog Series: Denis Chernilevskiy, JUC Europe
</title>
<meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
<meta content='Jenkins is an open source automation server' name='description'>
<link href='/css/style.css' media='screen' rel='stylesheet'>
</head>
<body>
<a href='https://github.com/jenkinsci'>
<img alt='Fork us on GitHub' src='https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png' style='position: absolute; top: 0; right: 0; border: 0;'>
</a>
<div class='clearfloat' id='head'>
<div class='clearfloat'>
<div id='logo'>
<a href='/' title='Jenkins'>
<img src='/images/header_logo.png'>
</a>
<div id='tagline'>
An extendable open source automation server
</div>
</div>
</div>
<div class='clearfloat' id='navbar'>
<div id='page-bar'>
<ul class='menu'>
<li class='leaf first'>
<a href='/node' title='Blog landing page'>
Blog
</a>
</li>
<li class='expanded'>
<a href='/' title=''>
Connect
</a>
<ul class='menu'>
<li class='leaf first'>
<a href='/content/mailing-lists' title='Browse Jenkins mailing list archives and/or subscribe to lists'>
Mailing Lists
</a>
</li>
<li class='leaf'>
<a href='/content/chat' title='Chat with the rest of the Jenkins community on IRC'>
Chat
</a>
</li>
<li class='leaf'>
<a href='http://twitter.com/jenkinsci' title='Check out @jenkinsci on Twitter'>
Twitter
</a>
</li>
<li class='leaf'>
<a href='/content/event-calendar' title='Calendar for Jenkins events'>
Event Calendar
</a>
</li>
<li class='leaf'>
<a href='https://wiki.jenkins-ci.org/display/JENKINS/Office+Hours' title='WebEx-based online meeting'>
Office Hours
</a>
</li>
<li class='leaf last'>
<a href='https://reddit.com/r/jenkinsci' title='Check out the latest links and news on jenkinsci.reddit.com!'>
reddit
</a>
</li>
</ul>
</li>
<li class='leaf'>
<a href='https://wiki.jenkins-ci.org/display/JENKINS/Issue+Tracking' title='JIRA for Jenkins'>
Bug Tracker
</a>
</li>
<li class='leaf'>
<a href='http://wiki.jenkins-ci.org/' title='Main documentation of Jenkins'>
Wiki
</a>
</li>
<li class='leaf'>
<a href='http://ci.jenkins-ci.org/' title='Jenkins and plugins built on Jenkins'>
CI
</a>
</li>
<li class='leaf'>
<a href='https://wiki.jenkins-ci.org/display/JENKINS/Donation' title=''>
Donation
</a>
</li>
<li class='leaf last'>
<a href='/content/about-jenkins-ci' title='About Jenkins CI'>
About
</a>
</li>
</ul>
</div>
</div>

</div>
<div class='clearfloat' id='page'>
<div class='clearfloat' id='top'>
<div id='sidebar'>
<div class='block block-block even' id='block-block-5'>
<h3>
What is Jenkins?
</h3>
<div class='content'>
<p>
In a nutshell, Jenkins is the leading open source automation server.
Built with Java, it provides
<strong>
hundreds
</strong>
of plugins to support building, testing, deploying and automation
virtually any project
</p>
</div>
</div>
<link href='/css/download.css' media='screen' rel='stylesheet'>
<link href='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/themes/base/jquery.ui.all.css' media='screen' rel='stylesheet'>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js'></script>
<script src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js'></script>
<div class='block block-block even' id='block-block-15'>
<h3>
Download
</h3>
<div class='content'>
<div id='download-tabs'>
<ul class='tab-bar'>
<li>
<a href='#release'>
Release
</a>
</li>
<li>
<a href='#stable'>
Long-Term Support Release
</a>
</li>
</ul>
<div class='tab' id='release'>
<dl>
<dt>
Java Web Archive (.war)
</dt>
<dd>
<div>
<a href='http://mirrors.jenkins-ci.org/war/latest/jenkins.war'>
<strong>
Latest:
1.638
</strong>
</a>
</div>
<div class='release-block-small'>
<a href='/changelog'>
changelog
</a>
|
<a href='http://mirrors.jenkins-ci.org/war/'>
past releases
</a>
</div>
</dd>
<dt>Native packages</dt>
<dd class='release-block-platforms'>
<div>
<img src='/images/os/win_other.png'>
<a class='release-block-soft' href='http://mirrors.jenkins-ci.org/windows/latest' onclick="return download('http://jenkins-ci.org/content/thank-you-downloading-windows-installer')">Windows</a>
</img>
</div>
<div>
<img src='/images/os/ubuntu.png'>
<a class='release-block-soft' href='http://pkg.jenkins-ci.org/debian/'>Ubuntu/Debian</a>
</img>
</div>
<div>
<img src='/images/os/redhat.png'>
<a class='release-block-soft' href='http://pkg.jenkins-ci.org/redhat/'>Red Hat/Fedora/CentOS</a>
</img>
</div>
<div>
<img src='/images/os/os_macosx.png'>
<a class='release-block-soft' href='http://mirrors.jenkins-ci.org/osx/latest' onclick="return download('http://jenkins-ci.org/content/thank-you-downloading-os-x-installer')">Mac OS X</a>
</img>
</div>
<div>
<img src='/images/os/opensuse.png'>
<a class='release-block-soft' href='http://pkg.jenkins-ci.org/opensuse/'>openSUSE</a>
</img>
</div>
<div>
<img src='/images/os/freebsd.png'>
<a class='release-block-soft' href='http://www.freshports.org/devel/jenkins'>FreeBSD</a>
</img>
</div>
<div>
<img src='/images/os/os_openbsd.png'>
<a class='release-block-soft' href='http://openports.se/devel/jenkins/devel'>OpenBSD</a>
</img>
</div>
<div>
<img src='/images/os/os_gentoo.png'>
<a class='release-block-soft' href='http://code.google.com/p/godin-gentoo-repository/wiki/Jenkins'>Gentoo</a>
</img>
</div>
</dd>
<dt>Docker</dt>
<dd id='release-block-platforms'>
<div>
<a class='release-block-soft' href='https://registry.hub.docker.com/u/jenkinsci/jenkins/'>
<tt>docker pull jenkinsci/jenkins</tt>
</a>
</div>
</dd>
</dl>
</div>
<div class='tab' id='stable'>
<dl>
<dt>Java Web Archive (.war)</dt>
<dd style='margin-bottom:1em'>
<div>
<a href='http://mirrors.jenkins-ci.org/war-stable/latest/jenkins.war'>
<strong>
Older but stable:
1.625.2
</strong>
</a>
</div>
<div class='release-block-small' style='text-align:right'>
<a class='release-block-soft' href='/changelog-stable'>changelog</a>
|
<a class='release-block-soft' href='http://mirrors.jenkins-ci.org/war-stable/'>past releases</a>
|
<a class='release-block-soft' href='/stable-rc'>RC</a>
</div>
<br>
<div style='text-align:right'>
<a href='https://wiki.jenkins-ci.org/display/JENKINS/LTS+Release+Line'>
<strong>What is LTS?</strong>
</a>
</div>
</dd>
<dt>Native packages</dt>
<dd class='release-block-platforms'>
<div>
<img src='/images/os/win_other.png'>
<a class='release-block-soft' href='http://mirrors.jenkins-ci.org/windows-stable/latest' onclick="return download('http://jenkins-ci.org/content/thank-you-downloading-windows-installer?releaseLine=-stable')">Windows</a>
</img>
</div>
<div>
<img src='/images/os/ubuntu.png'>
<a class='release-block-soft' href='http://pkg.jenkins-ci.org/debian-stable/'>Ubuntu/Debian</a>
</img>
</div>
<div>
<img src='/images/os/redhat.png'>
<a class='release-block-soft' href='http://pkg.jenkins-ci.org/redhat-stable/'>Red Hat/Fedora/CentOS</a>
</img>
</div>
<div>
<img src='/images/os/os_macosx.png'>
<a class='release-block-soft' href='http://mirrors.jenkins-ci.org/osx-stable/latest' onclick="return download('http://jenkins-ci.org/content/thank-you-downloading-os-x-installer?releaseLine=-stable')">Mac OS X</a>
</img>
</div>
<div>
<img src='/images/os/opensuse.png'>
<a class='release-block-soft' href='http://pkg.jenkins-ci.org/opensuse-stable/'>openSUSE</a>
</img>
</div>
<div>
<img src='/sites/default/files/images/freebsd.png'>
<a class='release-block-soft' href='http://www.freshports.org/devel/jenkins-lts'>FreeBSD</a>
</img>
</div>
<div>
<img src='/images/os/os_openbsd.png'>
<a class='release-block-soft' href='http://openports.se/devel/jenkins/stable'>OpenBSD</a>
</img>
</div>
<div>
<img src='/images/os/os_gentoo.png'>
<a class='release-block-soft' href='http://code.google.com/p/godin-gentoo-repository/wiki/Jenkins'>Gentoo</a>
</img>
</div>
</dd>
</dl>
<dt>Docker</dt>
<dd id='release-block-platforms'>
<div>
<a class='release-block-soft' href='https://registry.hub.docker.com/_/jenkins/'>
<tt>docker pull jenkins</tt>
</a>
</div>
</dd>
</div>
</div>
</div>
</div>
<script>
  $(function(){
    if (window.location.pathname == '/changelog-stable' || window.location.pathname == '/stable-rc') {
      $("#download-tabs").tabs({ selected: 1 });
    } else {
      $("#download-tabs").tabs();
    }
    $("#download-tabs, #download-tabs .ui-tabs-nav, #download-tabs .ui-tabs-nav > *" )
      .removeClass( "ui-corner-all ui-corner-top" );
  });
  
  function download(href) {
    window.location = href;
    return false;
  }
</script>
<style>
  .ui-widget { font-family: inherit !important; }
  .ui-widget-content { color:inherit !important; }
  .ui-widget-content .tab a { color: #D24939 !important; }
</style>

<div class='block block-block even' id='block-block-15'>
<div class='content'>
<center>
<a href='http://www.wakaleo.com/books/jenkins-the-definitive-guide'>
<img alt='Jenkins: The Definitive Guide' border='0' src='http://agentdero.cachefly.net/continuousblog/images/jenkins-cover-small.png' width='220'>
</a>
<br>
<a href='http://oreilly.com/catalog/0636920010326'>
<strong>
Buy the book!
</strong>
</a>
</center>
</div>
</div>

<div class='block block-block odd' id='block-block-8'>
<h3>
Resources
</h3>
<div class='content'>
<big>
<p>
<a href='/calendar'>
Calendar
</a>
</p>
<p>
<a href='https://wiki.jenkins-ci.org/'>
Wiki
</a>
</p>
<p>
<a href='https://issues.jenkins-ci.org/'>
Issues
</a>
</p>
<p>
<a href='http://ci.jenkins-ci.org/'>
Jenkins-on-Jenkins
</a>
</p>
</big>
</div>
</div>


</div>
<div class='main-content with-sidebar' id='content'>
<div id='content-top'>
<div class='node clear-block'>
<h1>
<a href='/blog/2015/05/07/juc-speaker-blog-series-denis-chernilevskiy-juc-europe/' title='JUC Speaker Blog Series: Denis Chernilevskiy, JUC Europe'>
JUC Speaker Blog Series: Denis Chernilevskiy, JUC Europe
</a>
</h1>
<span class='submitted'>
Published on
2015-05-07T00:00:00+00:00
</span>
<div style='float: right; clear: all;'>
<a class='twitter-share-button' data-lang='en' href='https://twitter.com/share'>
Tweet
</a>
</div>

<div class='content'>
<div style="float:right; margin:1em"><br/>
<img src="https://jenkins-ci.org/sites/default/files/images/Jenkins_Butler_0.png" width=114 height=128/><br/>
</div><br/>
<br/>
<p>Jenkins is a great tool for automation of all kinds of processes in the software development cycle. Falling back to the year 2008 I remember myself creating my first job and the feeling of enlightenment flowing through my veins :) Then it was just one script running on just one slave (node) and it was enough for that particular task. But years have passed, software systems have become more complicated and terms like «cloud», «distributed environment», «CI/CD» are not a discovery for anyone nowadays. But how can these things be connected and used by Jenkins? The detailed answer for this question will be revealed in my presentation of "compound-cloud" plugin at <a href="http://www.cloudbees.com/jenkins/juc-2015/europe">JUC Europe 2015</a>.</p><br/>
<br/>
<p>Before I got to Yandex, the QA's automation concept was the following:</p><br/>
<br/>
<ul><br/>
<li>The job takes 1 free slave</li><br/>
<li>The job installs the system under test and tests themselves to this node</li><br/>
<li>The job runs tests</li><br/>
<li>The job cleans-up and returns the slave back to the pool</li><br/>
</ul><br/>
<br/>
<p>When I started working for Yandex I understood that the concept of one single slave for a job is not a solution for our tasks because of one particular reason - the system under test was not able to work on a single node… This system is a Yandex MediaAd platform and it requires at least 4 separate nodes to be run on. Better - 8 nodes. Optimal - 40 nodes :)</p><br/>
<br/>
<p>Thinking about the problem, we thought we would get closer to the solution by simply using a single Jenkins slave as a launchpad for tests and for some tools which will then get some more nodes from the cloud (we already had OpenStack ready) and deploy the system inside them. Thank God we haven’t implemented this solution :)</p><br/>
<br/>
<p>We’ve been stopped by the following reasons:</p><br/>
<br/>
<ul><br/>
<li>We are lazy and want to write as little code as possible :)</li><br/>
<li>There’s a JClouds plugin that can work with OpenStack. Why don’t we use it? 'Cause it provisions only 1 slave per job. But it has provisioning algorithms implemented already, and we don’t want to reimplement them…</li><br/>
<li>If we create cloud instances with a separate tool, then we have to manage them separately and can’t get profit of using Jenkins’ slave management, which is also implemented already…</li><br/>
<li>if we do so, we also lose Jenkins’ slave features like running a script on the slave, get some reports or statistics and so on</li><br/>
<li>We would also lose visibility: how many slaves we have, how many are busy, how many left til we get to the cloud quota limit? We could go to OpenStack panel then, but it’s totally inconvenient…</li><br/>
</ul><br/>
<br/>
<p>As a result of this reasoning, the idea emerged! «We should provide an ability to either attach several slaves to a job, or to allow a slave to consist of several nodes». The second way seemed to give more order in slaves management and it was stated to be a final solution for our problem. We called this concept a «compound-slave». And then we coded...</p><br/>
<br/>
<p>That’s how the compound-cloud plugin was born. It allows us to get such compound-slaves from any cloud plugin installed to Jenkins. Of course there’s also a possibility to form a compound slave from single slaves already attached to Jenkins, but it’s not the true way for hardcore IT guys ;)</p><br/>
<br/>
<p>Of course there are lots of details on how we use this concept in a real life for our purposes (and I will surely describe the main parts of them in my speech), but here’s a short list of common use-cases:</p><br/>
<br/>
<ul><br/>
<li>We configure a set of labels via the JClouds plugin. Each label represents 1 slave template, like «small_ubuntu_server» or «large_win_server».</li><br/>
<li>We then configure a compound-slave label via compound-сloud plugin. Each label is a set of single cloud labels. As a result we have a label like «Small test env» consisting of "1x large WinServer + 3x small Ubuntu».</li><br/>
<li>We assign roles to each single node in a compound label, to be able to distinguish them, so the job can run a script on a particular node inside a compound-slave for example.</li><br/>
<li>We assign a label to a job, like it’s done for a JClouds label, for example.</li><br/>
<li>When the job starts, a compound-slave provisions from the cloud using the corresponding compound label.</li><br/>
<li>We run a deployment tool on a ROOT role node of a compound-slave. It then deploys the system under test to other nodes inside this compound-slave.</li><br/>
<li>We run tests.</li><br/>
<li>We don’t bother with creating/cleaning/stopping/deleting slaves. It’s done by Jenkins.</li><br/>
<li>We get profit :)</li><br/>
</ul><br/>
<br/>
<p>The core feature is that we've reused all the provisioning and management mechanisms already implemented in Jenkins and cloud plugins. We just run our jobs and don’t care about the distributed infrastructure!</p><br/>
<br/>
<div style="float:left; margin:1em"><br/>
<img src="https://jenkins-ci.org/sites/default/files/images/Denis-Chernilevskiy_0.jpg" width=150 height=180/><br/>
</div><br/>
<br/>
<p>This post is by Denis Chernilevskiy, the head of QA/DevOps Services at Yandex. If you have your ticket to <a href="http://www.cloudbees.com/jenkins/juc-2015/europe">JUC Europe</a>, you can attend his talk <a href="http://www.cloudbees.com/jenkins/juc-2015/abstracts/europe/02-02-1600-chernilevskiy">"Multi-Node Environment as a Jenkins Slave (Compound-Slave)"</a> on Day 2.</p><br/>
<br/>
<p><i>Still need your ticket to JUC? Early bird pricing ends May 15. Also, if you register with a friend you can get 2 tickets for the price of 1! <a href="http://www.cloudbees.com/jenkins/juc-2015/">Register here for a JUC near you.</a></i></p><br/>
<br/><br/><br/><br/><br/><br/>
<p><b>Thank you to our <a href="http://www.cloudbees.com/jenkins/juc-2015/sponsors">sponsors</a> for the 2015 Jenkins User Conference World Tour:</b></p><br/>
<br/>
<div style="float:left; margin:0em"><br/>
<img src="http://jenkins-ci.org/sites/default/files/images/sponsors-06032015-02_0.png" width=598 height=579/><br/>
</div>

</div>
</div>

<div id='content-bottom'>
</div>
</div>
<script>
  !function(d,s,id) {
    var js, fjs=d.getElementsByTagName(s)[0];
    if (!d.getElementById(id)) {
      js = d.createElement(s);
      js.id=id;
      js.src="//platform.twitter.com/widgets.js";
      fjs.parentNode.insertBefore(js,fjs);
    }
  }(document,"script","twitter-wjs");
</script>

<div id='github'>
<a href='https://github.com/jenkinsci/jenkins.io/edit/master/content//blog/2015/2015-05-07-juc-speaker-blog-series-denis-chernilevskiy-juc-europe.html' title='Edit /blog/2015/2015-05-07-juc-speaker-blog-series-denis-chernilevskiy-juc-europe.html on GitHub'>
Improve this page
</a>
</div>
<script>
 (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){

                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),

                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)

                    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
ga('create', 'UA-4216293-5', 'auto');
ga('send', 'pageview');
ga('set', 'anonymizeIp', true);

</script>

</body>
</html>
